{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} - Accueil{% endblock %}

{% block body %}


    <!-- affichage des évènements du moment : les 3 ayant la date la plus proche-->
    <h2>Evènements du moment</h2>
    <section class="sortie-list">
        <!-- boucle for sur la liste des sorties et tri par nb de participants -->
        {% for moment in moments %}
            <article class="card">
                <h4>{{ moment.nom }}</h4>
                <span>Site : {{ moment.site.nom }}</span>
                <span>Date Début Sortie : {{ moment.dateHeureDebut|date('d/m/Y') }}</span>
                <span>Date Fin Inscription : {{ moment.dateLimiteInscription|date('d/m/Y') }}</span>
                <span>Nombre de places maximum : {{ moment.nbInscriptionMax }} </span>
                <span>Organisateur : {{ moment.getOrganisateur().nom }} {{ moment.getOrganisateur().prenom }}</span>

                {% if moment.etat == 'OUVERTE' %}
                    <span class="">OUVERTE - INSCRIPTION POSSIBLE ✅</span>
                {% else %}
                    <span class="">INSCRIPTION IMPOSSIBLE ⛔</span>
                {%  endif %}

            </article>
        {%  endfor %}
    </section>

    <!-- affichage des évènements les plus populaires : les 3 ayant le plus gd nb de participants-->
    <h2>Evènements les plus populaires</h2>
    <!-- boucle for sur la liste des sorties et tri par nb de participants -->
    <section class="sortie-list">
        {% for populaire in populaires %}
            <article class="card">
                <h4> {{ populaire.nom }}</h4>
                <span>Site : {{ populaire.site.nom }}</span>
                <span>Date Début Sortie : {{ populaire.dateHeureDebut|date('d/m/Y') }}</span>
                <span>Date Fin Inscription : {{ populaire.dateLimiteInscription|date('d/m/Y') }}</span>
                <span>Nombre de places maximum : {{ populaire.nbInscriptionMax }} </span>
                <span>Nombre de places restantes : {{ populaire.nbInscriptionMax - populaire.users|length }} </span>
                <span>Organisateur : {{ populaire.getOrganisateur().nom }} {{ populaire.getOrganisateur().prenom }}</span>
                {% if populaire.etat == 'OUVERTE' %}
                <span>OUVERTE - INSCRIPTION POSSIBLE ✅</span>
                {% else %}
                    <span class="">INSCRIPTION IMPOSSIBLE ⛔</span>
                {%  endif %}


            </article>
        {% endfor %}
    </section>


{% endblock %}
